{"ast":null,"code":"import _slicedToArray from\"D:/Jobs here/GitHub/CE_Smart_Contract_Audit/scat-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{LineChart,Line,CartesianGrid,XAxis,YAxis,Tooltip,ResponsiveContainer}from'recharts';import{checkData,convertNumber}from'./GlobalFunction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CustomTooltip(props){var active=props.active,payload=props.payload,label=props.label,currency=props.currency;if(active&&payload&&payload.length){var date=new Date(label*1000);date=date.toLocaleString('th-TH',{dateStyle:'medium',timeStyle:'medium'});return/*#__PURE__*/_jsxs(\"div\",{className:\"tooltip\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\".concat(date,\" : \")}),/*#__PURE__*/_jsx(\"p\",{children:\"\".concat(currency.toUpperCase(),\" : \").concat(convertNumber(payload[0].value))})]});}return null;}function ChartComponent(props){var name=props.name;var _useState=useState(\"usd\"),_useState2=_slicedToArray(_useState,2),currency=_useState2[0],setCurrency=_useState2[1];var _useState3=useState(7),_useState4=_slicedToArray(_useState3,2),range=_useState4[0],setRange=_useState4[1];var projectName=name.replace(/\\s+/g,'-').toLowerCase();var _useState5=useState(\"Blank\"),_useState6=_slicedToArray(_useState5,2),chartData=_useState6[0],setChartData=_useState6[1];useEffect(function(){if(true){fetch(\"https://scat-api.herokuapp.com/TVLHistory/history/\"+projectName).then(function(res){if(res.ok){return res.json();}throw res;}).then(function(res){setChartData(res);}).catch(function(error){console.log(\"Error fetching data : \",error);setChartData(\"Blank\");});}});var FilteredData=chartData.slice(0,range);var changeCurrency=function changeCurrency(event){setCurrency(event.target.id);};var changeRange=function changeRange(event){setRange(event.target.id);if(range!=\"All\"){FilteredData=chartData.slice(chartData.length-range);}else{FilteredData=chartData;}};var checkCurrency=function checkCurrency(id){if(currency==id){return\"active\";}else{return\"not-active\";}};var checkRange=function checkRange(id){if(range==id){return\"active\";}else{return\"not-active\";}};return/*#__PURE__*/_jsxs(\"div\",{class:\"infoitem\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Chart\"}),/*#__PURE__*/_jsxs(\"p\",{class:\"chart_left\",children:[/*#__PURE__*/_jsx(\"span\",{class:checkCurrency(\"usd\"),id:\"usd\",onClick:changeCurrency,children:\"USD\"}),/*#__PURE__*/_jsx(\"span\",{children:\" | \"}),/*#__PURE__*/_jsx(\"span\",{class:checkCurrency(\"eth\"),id:\"eth\",onClick:changeCurrency,children:\"ETH\"}),/*#__PURE__*/_jsx(\"span\",{children:\" | \"}),/*#__PURE__*/_jsx(\"span\",{class:checkCurrency(\"btc\"),id:\"btc\",onClick:changeCurrency,children:\"BTC\"})]}),/*#__PURE__*/_jsxs(\"p\",{class:\"chart_right\",children:[/*#__PURE__*/_jsx(\"span\",{class:checkRange(365),onClick:changeRange,id:365,children:\"1 Year\"}),/*#__PURE__*/_jsx(\"span\",{children:\" | \"}),/*#__PURE__*/_jsx(\"span\",{class:checkRange(90),onClick:changeRange,id:90,children:\"3 Months\"}),/*#__PURE__*/_jsx(\"span\",{children:\" | \"}),/*#__PURE__*/_jsx(\"span\",{class:checkRange(30),onClick:changeRange,id:30,children:\"1 Month\"}),/*#__PURE__*/_jsx(\"span\",{children:\" | \"}),/*#__PURE__*/_jsx(\"span\",{class:checkRange(7),onClick:changeRange,id:7,children:\"1 Week\"})]}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsx(\"div\",{class:\"padbottom\",children:!checkData(chartData)?/*#__PURE__*/_jsx(\"h4\",{class:\"centerh3\",children:\"No Chart Available\"}):/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:300,children:/*#__PURE__*/_jsxs(LineChart,{margin:{left:10,bottom:10,right:10},data:checkData(FilteredData)?FilteredData.reverse():[],children:[/*#__PURE__*/_jsx(Line,{type:\"linear\",dataKey:currency,stroke:\"#8884d8\"}),/*#__PURE__*/_jsx(CartesianGrid,{stroke:\"#ccc\",vertical:false}),/*#__PURE__*/_jsx(Tooltip,{content:/*#__PURE__*/_jsx(CustomTooltip,{currency:currency})}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"timestamp\",hide:true}),/*#__PURE__*/_jsx(YAxis,{domain:['auto','auto'],tickFormatter:function tickFormatter(tick){return convertNumber(tick);}})]})})})]});}export default ChartComponent;","map":{"version":3,"sources":["D:/Jobs here/GitHub/CE_Smart_Contract_Audit/scat-web/src/components/ChartComponent.js"],"names":["useState","useEffect","LineChart","Line","CartesianGrid","XAxis","YAxis","Tooltip","ResponsiveContainer","checkData","convertNumber","CustomTooltip","props","active","payload","label","currency","length","date","Date","toLocaleString","dateStyle","timeStyle","toUpperCase","value","ChartComponent","name","setCurrency","range","setRange","projectName","replace","toLowerCase","chartData","setChartData","fetch","then","res","ok","json","catch","error","console","log","FilteredData","slice","changeCurrency","event","target","id","changeRange","checkCurrency","checkRange","left","bottom","right","reverse","tick"],"mappings":"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","sourcesContent":["import { useState,useEffect } from 'react';\r\nimport { LineChart, Line, CartesianGrid, XAxis, YAxis, Tooltip, ResponsiveContainer } from 'recharts';\r\nimport { checkData,convertNumber } from './GlobalFunction';\r\n\r\nfunction CustomTooltip(props){\r\n    const {active,payload,label,currency} = props;\r\n    if (active && payload && payload.length) {\r\n        var date = new Date(label*1000);\r\n        date = date.toLocaleString('th-TH',{dateStyle: 'medium', timeStyle: 'medium'});\r\n        return (\r\n          <div className=\"tooltip\">\r\n            <p>{`${date} : `}</p>\r\n            <p>{`${currency.toUpperCase()} : ${convertNumber(payload[0].value)}`}</p>\r\n          </div>\r\n        );\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction ChartComponent(props){\r\n    const {name} = props;\r\n    const [currency,setCurrency] = useState(\"usd\");\r\n    const [range,setRange] = useState(7);\r\n    var projectName = name.replace(/\\s+/g, '-').toLowerCase();\r\n    const [chartData,setChartData] = useState(\"Blank\");\r\n    useEffect(() => {\r\n        if(true){\r\n            fetch(\"https://scat-api.herokuapp.com/TVLHistory/history/\" + projectName)\r\n            .then(res => {\r\n              if(res.ok){\r\n                return res.json();\r\n              }\r\n              throw res;\r\n            })\r\n            .then((res) => {\r\n              setChartData(res);\r\n            })\r\n            .catch((error) => {\r\n              console.log(\"Error fetching data : \", error);\r\n              setChartData(\"Blank\");\r\n            })\r\n        }\r\n    })\r\n    var FilteredData = chartData.slice(0, range);\r\n\r\n    const changeCurrency=(event)=>{\r\n        setCurrency(event.target.id);\r\n    }\r\n\r\n    const changeRange=(event)=>{\r\n        setRange(event.target.id);\r\n        if(range != \"All\"){\r\n            FilteredData = chartData.slice(chartData.length - range);\r\n        }\r\n        else{\r\n            FilteredData = chartData;\r\n        }\r\n    }\r\n\r\n    const checkCurrency=(id)=>{\r\n        if(currency == id){\r\n            return \"active\";\r\n        }\r\n        else{\r\n            return \"not-active\";\r\n        }\r\n    }\r\n\r\n    const checkRange=(id)=>{\r\n        if(range == id){\r\n            return \"active\";\r\n        }\r\n        else{\r\n            return \"not-active\";\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div class=\"infoitem\">\r\n            <h3>\r\n                Chart\r\n            </h3>\r\n            <p class=\"chart_left\">\r\n                <span class={checkCurrency(\"usd\")} id=\"usd\" onClick={changeCurrency}>USD</span>\r\n                <span> | </span>\r\n                <span class={checkCurrency(\"eth\")} id=\"eth\" onClick={changeCurrency}>ETH</span>\r\n                <span> | </span>\r\n                <span class={checkCurrency(\"btc\")} id=\"btc\" onClick={changeCurrency}>BTC</span>\r\n            </p>\r\n            <p class=\"chart_right\">\r\n                <span class={checkRange(365)} onClick={changeRange} id={365}>1 Year</span>\r\n                <span> | </span>\r\n                <span class={checkRange(90)} onClick={changeRange} id={90}>3 Months</span>\r\n                <span> | </span>\r\n                <span class={checkRange(30)} onClick={changeRange} id={30}>1 Month</span>\r\n                <span> | </span>\r\n                <span class={checkRange(7)} onClick={changeRange} id={7}>1 Week</span>\r\n            </p>\r\n            <p></p>\r\n            <p></p>\r\n            <div class=\"padbottom\">\r\n            {!checkData(chartData) ? <h4 class=\"centerh3\">No Chart Available</h4> : <ResponsiveContainer width=\"100%\" height={300}>\r\n                <LineChart margin={{left: 10, bottom: 10, right: 10}} data={checkData(FilteredData) ? FilteredData.reverse() : []}>\r\n                    <Line type=\"linear\" dataKey={currency} stroke=\"#8884d8\" />\r\n                    <CartesianGrid stroke=\"#ccc\" vertical={false}/>\r\n                    <Tooltip content={<CustomTooltip currency={currency}/>}/>\r\n                    <XAxis dataKey=\"timestamp\" hide={true}/>\r\n                    <YAxis domain={['auto','auto']} tickFormatter={tick => {\r\n                        return convertNumber(tick);\r\n                    }}/>\r\n                </LineChart>\r\n            </ResponsiveContainer>}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ChartComponent;"]},"metadata":{},"sourceType":"module"}